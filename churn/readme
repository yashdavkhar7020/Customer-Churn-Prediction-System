# ğŸ“Š  Customer Churn Prediction(ML)

## ğŸš€ Project Overview
This project is an **Customer Churn Prediction System**, designed to predict whether a customer is likely to churn based on various features. It consists of:

- **Flask API** for handling predictions and model serving.
- **Streamlit UI** (designed with OpenAI) for an interactive user interface.
- **Docker** for containerization.
- **AWS ECS (Fargate)** for scalable cloud deployment.

## ğŸŒŸ Features
âœ… **Machine Learning Model** (XGBoost) for high-accuracy churn prediction.  
âœ… **User-Friendly Streamlit UI** for easy CSV upload and batch prediction.  
âœ… **REST API with Flask** for seamless backend integration.  
âœ… **Deployed on AWS ECS (Fargate)** with auto-scaling enabled.  
âœ… **Scalable & Cost-Efficient** with auto-scaling from 0-2 tasks.  

---

## ğŸ“ Project Structure
```
.
â”œâ”€â”€ app.py                  # Streamlit UI (designed with OpenAI)
â”œâ”€â”€ main.py                 # Flask API
â”œâ”€â”€ customer_churn_model.json # Trained XGBoost Model
â”œâ”€â”€ scaler.pkl              # Scaler for input normalization
â”œâ”€â”€ requirements.txt        # Required Python packages
â”œâ”€â”€ Dockerfile              # Containerization setup
â”œâ”€â”€ task-definition.json    # AWS ECS Task Definition
â”œâ”€â”€ README.md               # Project Documentation
```

---

## ğŸ›  Installation & Setup
### **1ï¸âƒ£ Clone the Repository**
```bash
git clone https://github.com/your-username/churn-prediction.git
cd churn-prediction
```

### **2ï¸âƒ£ Install Dependencies**
```bash
pip install -r requirements.txt
```

### **3ï¸âƒ£ Run Flask API Locally**
```bash
python main.py
```
The Flask API will be available at **`http://127.0.0.1:5000/`**

### **4ï¸âƒ£ Run Streamlit UI Locally**
```bash
streamlit run app.py
```
The UI will be available at **`http://127.0.0.1:8501/`**

---

## ğŸ³ Running with Docker
### **1ï¸âƒ£ Build the Docker Image**
```bash
docker build -t churn-prediction .
```

### **2ï¸âƒ£ Run the Container**
```bash
docker run -p 5000:5000 -p 8501:8501 churn-prediction
```
Now, access the UI at **`http://127.0.0.1:8501/`** and the API at **`http://127.0.0.1:5000/`**

---

## â˜ï¸ Deploying on AWS ECS (Fargate)
### **1ï¸âƒ£ Push Image to AWS ECR**
```bash
aws ecr create-repository --repository-name churn-prediction
$(aws ecr get-login-password --region ap-south-1) | docker login --username AWS --password-stdin <your-ecr-url>
docker tag churn-prediction <your-ecr-url>:latest
docker push <your-ecr-url>:latest
```

### **2ï¸âƒ£ Create & Deploy ECS Service**
```bash
aws ecs create-cluster --cluster-name churn-prediction-cluster
aws ecs register-task-definition --cli-input-json file://task-definition.json
aws ecs create-service --cluster churn-prediction-cluster --service-name churn-prediction-service \
  --task-definition churn-prediction-task --launch-type FARGATE --desired-count 1 \
  --network-configuration "awsvpcConfiguration={subnets=[subnet-id],securityGroups=[sg-id],assignPublicIp=ENABLED}"
```

### **3ï¸âƒ£ Access Deployed Application**
Find the **Public IP** of your ECS instance:
```bash
aws ec2 describe-network-interfaces --network-interface-ids eni-xxxxxxxxxx --query "NetworkInterfaces[0].Association.PublicIp" --output text
```
Now, access:
- **Flask API:** `http://<public-ip>:5000/`
- **Streamlit UI:** `http://<public-ip>:8501/`

---

## âš¡ Auto-Scaling Setup (Cost-Effective)
To prevent unnecessary charges, enable **Auto-Scaling** in AWS ECS:
1ï¸âƒ£ Go to **AWS ECS Console** â†’ **Clusters** â†’ `churn-prediction-cluster`
2ï¸âƒ£ Click on **Auto-Scaling**
3ï¸âƒ£ Set **Minimum tasks = 0** (Stops when idle)
4ï¸âƒ£ Set **Maximum tasks = 1-2** (Starts when accessed)

---

## ğŸ’¡ Usage Guide
1ï¸âƒ£ **Upload a CSV file** with customer details in the Streamlit UI.
2ï¸âƒ£ Click **Predict Churn** to get AI-based predictions.
3ï¸âƒ£ The results will be displayed in a **futuristic floating UI**.

---

## ğŸ† Tech Stack
- **Machine Learning:** XGBoost
- **Backend:** Flask REST API
- **Frontend:** Streamlit (UI Designed with OpenAI)
- **Containerization:** Docker
- **Cloud Deployment:** AWS ECS (Fargate)

---

## ğŸ¤– Credits
Developed by **Yash Davkhar** ğŸ”ğŸ“Š .

